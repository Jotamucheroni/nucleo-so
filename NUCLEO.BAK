#include <system.h>
#include <stdio.h>
#include <string.h>

typedef struct desc_process
{
	char nome[35];
	enum {ativo, bloq_P, terminado} estado;
	PTR_DESC contexto;
	struct desc_process *prox_desc;
	struct desc_process *fila_sem;
}DESCRITOR_PROC;

typedef DESCRITOR_PROC *PTR_DESC_PROC;

typedef struct registros{
	unsigned bx1,es1;
}regis;

typedef union k{
	regis x;
	char far *y;
}APONTA_REG_CRIT;

typedef struct
{
	int s;
	PTR_DESC_PROC Q;
}SEMAFORO;

extern APONTA_REG_CRIT a;

extern PTR_DESC_PROC prim;
extern PTR_DESC d_esc;

/*Rotinas basicas-------------------------------------------------------
----------------------------------------------------------------------*/

extern void far volta_dos();

extern void far criar_Processo(void far (*end_proc)(), char nome[35]);

extern void far escalador();

extern void far dispara_sistema();

extern void far terminar_Processo();

/*----------------------------------------------------------------------
----------------------------------------------------------------------*/

/*Comunicacao e sincronizacao entre processos---------------------------
----------------------------------------------------------------------*/

extern void far inicia_semaforo(SEMAFORO *sem, int n)

extern void far P(SEMAFORO *sem);

extern void far V(SEMAFORO *sem)

/*----------------------------------------------------------------------
----------------------------------------------------------------------*/
